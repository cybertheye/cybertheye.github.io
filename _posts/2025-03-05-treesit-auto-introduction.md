---
title: ğŸŒ³ treesit-auto ä»‹ç»
layout: post
author: cyven
tags: emacs treesit
categories: CS CS::Tech
---


## ä»€ä¹ˆæ˜¯treesit

treesit æ˜¯ä¸€ç§è¯­ä¹‰åˆ†æå·¥å…·

æ¯”å¦‚ä»£ç çš„é«˜äº®,æ€ä¹ˆå†³å®šå“ªäº›æ˜¯è¦é«˜äº®çš„å‘¢?

æ¯”å¦‚ä»£ç çš„æŠ˜å ,æ€ä¹ˆå†³å®šå“ªåˆ°å“ªæ˜¯å¯ä»¥æŠ˜å çš„å‘¢?

æ¯”å¦‚ä»£ç çš„æ‹¬å·çš„è·³è½¬,æ€ä¹ˆçŸ¥é“å“ªä¸ªå’Œå“ªä¸ªæ‹¬å·æ˜¯åŒ¹é…çš„å¯ä»¥è·³è½¬çš„å‘¢?

è¿™èƒŒåå°±éœ€è¦ treesit çš„æ”¯æŒ

## ä¸ºä»€ä¹ˆè¦ç”¨treesit

é‚£ä¹ˆ Emacs åœ¨æ²¡æœ‰æ”¯æŒ treesit çš„æ—¶å€™, æ™®é€šçš„ mode æ‰“å¼€, æ¯”å¦‚ python-mode æ‰“å¼€ python æ–‡ä»¶,ä»¥ä¸Šéƒ½æ˜¯åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®Œæˆå·¥ä½œ.

åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼,é¦–å…ˆæ˜¯æ€§èƒ½ä¸Šä¼šå·®,å…¶æ¬¡æ˜¯æ‰©å±•æ€§ä¸å¥½.å› ä¸ºå®ƒæœ¬è´¨æ˜¯æ ¹æ®å­—ç¬¦ä¸²åŒ¹é…,è€Œä¸æ˜¯è¯­ä¹‰åˆ†ææ¥çš„.


## å¦‚ä½•é…ç½® treesit

Emacs29 ä¹‹åå°±å†…ç½®äº† treesit, ä¹Ÿæœ‰ä¸€äº› mode å·²ç»æ˜¯ xxx-ts-mode äº†, åŠ äº† -ts- çš„è¯´æ˜å½“å‰è¿™ä¸ª mode æ˜¯åˆ©ç”¨treesitæ¥åšè¯­ä¹‰è§£æçš„

1. é¦–å…ˆæ˜¯å®‰è£… language-grammar, ä¼šå»è°ƒç”¨è¿™äº›ç¨‹åºåšè¯­ä¹‰è§£æ,ç›¸å½“äº server ç«¯
2. æˆ‘ä»¬ç»™ä»£ç æ–‡ä»¶å…³è” major mode , æ¯”å¦‚ python æ–‡ä»¶,æˆ‘ä»¬éœ€è¦ç”¨ python-mode æˆ–è€… python-ts-mode æ¥æ‰“å¼€å§,éœ€è¦å…³è”èµ·æ¥,å› ä¸º Emacs å†…ç½®äº†ä¸€äº› mode,æœ‰äº›è¿˜æ˜¯ ts-mode, ä½†æ˜¯æ²¡æœ‰çš„è¯,éœ€è¦å» github ä¸Šæ‰¾ä¸€ä¸‹,ç„¶åä¸‹è½½è¿™äº› plugin . å…·ä½“å¯ä»¥ç›´æ¥æ·»åŠ åˆ° `auto-mode-alist`ä¸­,æ¯”å¦‚`(push '("\\.java$" . java-ts-mode) auto-mode-alist)` è¿™æ ·å°±ä¼šåœ¨æ‰“å¼€`.java`æ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨å¼€å¯ `java-ts-mode`. ä¹Ÿå¯ä»¥å¯¹ä¸€äº›å·²ç»æœ‰çš„ mode åšä¸€äº› remap , æ˜ å°„åˆ° ts-mode, æ¯”å¦‚ `(push '(rust-mode . rust-ts-mode) major-mode-remap-alist)`
3. è™½ç„¶ä¸€äº›Emacs å†…ç½®äº†ä¸å°‘è§£æå™¨ï¼Œ å¾ˆå¤šè¯­è¨€é»˜è®¤å°±æ‰“å¼€äº† Tree-Sitter çš„æ”¯æŒï¼Œä½†æ˜¯ä¸€äº›æ–°åŠ çš„è¯­è¨€ Emacs è¿˜æ²¡æœ‰é…ç½®ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨ treesit-parser-create æ¥æ‰‹åŠ¨å¼€å¯ Tree-Sitter, `(add-hook 'markdown-ts-mode-hook #'(lambda () (treesit-parser-create 'markdown)))`

## treesit-autoåˆæ˜¯ä»€ä¹ˆ?

å¾ˆç®€å•, [treesit-auto](https://github.com/renzmann/treesit-auto) å°±æ˜¯å¸®ä½ åšäº†ä¸Šé¢çš„äº‹æƒ…çš„ä¸€ä¸ªåŒ…
