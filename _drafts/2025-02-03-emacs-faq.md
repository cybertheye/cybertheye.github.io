---
title: ğŸŒ³ Emacs FAQ
layout: post
author: cyven
tags: emacs
categories: CS CS::Tech
---



## use-package ä¸­çš„ :hook å’Œ :command æ˜¯ä»€ä¹ˆ,æœ‰ä»€ä¹ˆåŒºåˆ«?

`:hook` å°±æ˜¯ `(add-hook )`
`:command` æ˜¯æŒ‡å®šå»¶è¿ŸåŠ è½½çš„å‡ºå‘æ¡ä»¶, ä¹Ÿå°±æ˜¯è·Ÿåœ¨ `:command` åé¢çš„æŒ‡ä»¤ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™,æ‰å»åŠ è½½è¿™ä¸ªåŒ…

> To autoload an interactive command, use the :commands keyword, which takes either a symbol or a list of symbols as its argument. It creates autoloads for those commands (which defers loading of the module until those commands are used).



æ¯”å¦‚

```lisp
(use-package lsp-mode
    :hook (XXX-mode . lsp-deferred)
    :commands (lsp lsp-deferred))
```

æ”¹å†™æˆæ™®é€šçš„ elisp ä»£ç å°±æ˜¯

```lisp
(autoload 'lsp "lsp-mode" nil t)
(autoload 'lsp-deferred "lsp-mode" nil t)

(add-hook 'xxx-mode-hook 'lsp-deferred)
```

## add-hook å’Œ with-eval-after-load æœ‰ä»€ä¹ˆåŒºåˆ«

`add-hook`æ˜¯é’©å­,åœ¨æŸä¸ªäº‹ä»¶ä¹‹åæ‰§è¡Œä»£ç ,è¿™ä¸ªäº‹ä»¶åå¤å‘ç”Ÿçš„è¯,é‚£ä¹ˆé’©å­æ–¹æ³•ä¹Ÿä¼šæ‰§è¡Œå¤šæ¬¡
`with-eval-after-load` æ˜¯æŸä¸ªåŒ…åŠ è½½åæ‰§è¡Œçš„åˆå§‹åŒ–ä»£ç ,è‡ªå§‹è‡ªç»ˆåªæ‰§è¡Œä¸€æ¬¡
